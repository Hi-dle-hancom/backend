INFO:app.core.config:환경 설정 로드 완료: development 모드
INFO:app.core.config:🔧 개발 환경 모드로 실행 중입니다.
INFO:app.services.cache_service:PersistentCache 초기화 완료 - 디렉토리: /Users/doseon/Desktop/Hancom AI/project/data/cache, 메모리 제한: 200MB
INFO:app.services.cache_service:캐시 모니터링 스레드 시작됨
INFO:app.services.redis_service:Redis 설정: redis://localhost:6379 (환경: development)
INFO:app.services.cache_service:PersistentCache 초기화 완료 - 디렉토리: /Users/doseon/Desktop/Hancom AI/project/data/cache, 메모리 제한: 200MB
INFO:app.services.custom_agent_service:사전 정의된 에이전트 템플릿 로드 시작
INFO:app.services.custom_agent_service:사전 정의된 에이전트 8개 로드 완료
{"timestamp": "2025-07-08T11:24:21.008662", "level": "INFO", "logger": "startup", "message": "로깅 시스템 초기화 완료", "module": "logging_config", "function": "_log", "line": 104, "exc_info": null, "exc_text": null, "stack_info": null, "taskName": null, "service": "hapa-backend", "environment": "development", "log_level": "DEBUG", "debug_mode": true}
INFO:     Will watch for changes in these directories: ['/Users/doseon/Desktop/Hancom AI/project/Backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [47521] using WatchFiles
INFO:app.core.config:환경 설정 로드 완료: development 모드
INFO:app.core.config:🔧 개발 환경 모드로 실행 중입니다.
INFO:app.services.cache_service:PersistentCache 초기화 완료 - 디렉토리: /Users/doseon/Desktop/Hancom AI/project/data/cache, 메모리 제한: 200MB
INFO:app.services.cache_service:캐시 모니터링 스레드 시작됨
INFO:app.services.redis_service:Redis 설정: redis://localhost:6379 (환경: development)
INFO:app.services.cache_service:PersistentCache 초기화 완료 - 디렉토리: /Users/doseon/Desktop/Hancom AI/project/data/cache, 메모리 제한: 200MB
INFO:app.services.custom_agent_service:사전 정의된 에이전트 템플릿 로드 시작
INFO:app.services.custom_agent_service:사전 정의된 에이전트 8개 로드 완료
{"timestamp": "2025-07-08T11:24:21.421056", "level": "INFO", "logger": "startup", "message": "로깅 시스템 초기화 완료", "module": "logging_config", "function": "_log", "line": 104, "exc_info": null, "exc_text": null, "stack_info": null, "taskName": null, "service": "hapa-backend", "environment": "development", "log_level": "DEBUG", "debug_mode": true}
{"timestamp": "2025-07-08T11:24:21.447723", "level": "INFO", "logger": "startup", "message": "로깅 시스템 초기화 완료", "module": "logging_config", "function": "_log", "line": 104, "exc_info": null, "exc_text": null, "stack_info": null, "taskName": "Task-1", "service": "hapa-backend", "environment": "development", "log_level": "DEBUG", "debug_mode": true}
2025-07-08 11:24:21,461 - uvicorn.error - INFO - Started server process [47575]
2025-07-08 11:24:21,461 - uvicorn.error - INFO - Waiting for application startup.
2025-07-08 11:24:21,461 - main - INFO - {"timestamp": "2025-07-08T02:24:21.461262Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: HAPA 백엔드 시작 - started", "service": "main", "version": "0.4.0", "metadata": {"event": "HAPA 백엔드 시작", "status": "started", "uptime_seconds": 0.013657808303833008, "details": {"environment": "development", "vllm_server": "http://3.13.240.111:8002", "debug_mode": true}}}
2025-07-08 11:24:21,461 - main - INFO - {"timestamp": "2025-07-08T02:24:21.461322Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: Enhanced AI 서비스 초기화 - started", "service": "main", "version": "0.4.0", "metadata": {"event": "Enhanced AI 서비스 초기화", "status": "started", "uptime_seconds": 0.013715028762817383, "details": {}}}
2025-07-08 11:24:21,461 - app.services.enhanced_ai_model - INFO - Enhanced AI 모델 서비스 (vLLM 전용) 초기화 시작
2025-07-08 11:24:21,653 - vllm_integration - ERROR - {"timestamp": "2025-07-08T02:24:21.651656Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: vLLM 서버 연결", "service": "vllm_integration", "version": "0.4.0", "error_details": {"error_type": "ClientConnectorError", "error_message": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]", "context": "vLLM 서버 연결", "traceback": "Traceback (most recent call last):\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1073, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 104, in start_connection\n    raise first_exception\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 81, in start_connection\n    sock = await _connect_sock(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 166, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"uvloop/loop.pyx\", line 2633, in sock_connect\n  File \"uvloop/loop.pyx\", line 1108, in uvloop.loop.Loop._sock_connect_cb\nConnectionRefusedError: [Errno 61] Connect call failed ('3.13.240.111', 8002)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/app/services/vllm_integration_service.py\", line 61, in check_health\n    async with session.get(f\"{self.vllm_base_url}/health\") as response:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 1353, in __aenter__\n    self._resp = await self._coro\n                 ^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 657, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 564, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 975, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1350, in _create_direct_connection\n    raise last_exc\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1319, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1088, in _wrap_create_connection\n    raise client_error(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]\n", "additional_data": {}}}
2025-07-08 11:24:21,653 - app.services.enhanced_ai_model - WARNING - vLLM 서버 상태 이상: {'status': 'error', 'error': "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]"}
2025-07-08 11:24:21,653 - app.services.performance_profiler - INFO - AI 성능 메트릭이 초기화되었습니다 (vLLM 전용 메트릭 포함)
2025-07-08 11:24:21,653 - app.services.enhanced_ai_model - INFO - Enhanced AI 모델 서비스 초기화 완료
2025-07-08 11:24:21,653 - app.services.enhanced_ai_model - ERROR - vLLM 서버를 사용할 수 없습니다. 서버 상태를 확인하세요.
2025-07-08 11:24:21,821 - vllm_integration - ERROR - {"timestamp": "2025-07-08T02:24:21.820454Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: vLLM 서버 연결", "service": "vllm_integration", "version": "0.4.0", "error_details": {"error_type": "ClientConnectorError", "error_message": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]", "context": "vLLM 서버 연결", "traceback": "Traceback (most recent call last):\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1073, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 104, in start_connection\n    raise first_exception\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 81, in start_connection\n    sock = await _connect_sock(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 166, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"uvloop/loop.pyx\", line 2633, in sock_connect\n  File \"uvloop/loop.pyx\", line 1108, in uvloop.loop.Loop._sock_connect_cb\nConnectionRefusedError: [Errno 61] Connect call failed ('3.13.240.111', 8002)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/app/services/vllm_integration_service.py\", line 61, in check_health\n    async with session.get(f\"{self.vllm_base_url}/health\") as response:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 1353, in __aenter__\n    self._resp = await self._coro\n                 ^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 657, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 564, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 975, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1350, in _create_direct_connection\n    raise last_exc\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1319, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1088, in _wrap_create_connection\n    raise client_error(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]\n", "additional_data": {}}}
2025-07-08 11:24:21,821 - main - ERROR - {"timestamp": "2025-07-08T02:24:21.821809Z", "level": "ERROR", "category": "system_event", "message": "시스템 이벤트: vLLM 서버 연결 - failed", "service": "main", "version": "0.4.0", "metadata": {"event": "vLLM 서버 연결", "status": "failed", "uptime_seconds": 0.3742079734802246, "details": {"status": "error", "error": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]"}}}
2025-07-08 11:24:21,821 - app.services.enhanced_ai_model - DEBUG - 주기적 vLLM 상태 확인 시작
2025-07-08 11:24:22,017 - vllm_integration - ERROR - {"timestamp": "2025-07-08T02:24:22.016189Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: vLLM 서버 연결", "service": "vllm_integration", "version": "0.4.0", "error_details": {"error_type": "ClientConnectorError", "error_message": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]", "context": "vLLM 서버 연결", "traceback": "Traceback (most recent call last):\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1073, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 104, in start_connection\n    raise first_exception\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 81, in start_connection\n    sock = await _connect_sock(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 166, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"uvloop/loop.pyx\", line 2633, in sock_connect\n  File \"uvloop/loop.pyx\", line 1108, in uvloop.loop.Loop._sock_connect_cb\nConnectionRefusedError: [Errno 61] Connect call failed ('3.13.240.111', 8002)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/app/services/vllm_integration_service.py\", line 61, in check_health\n    async with session.get(f\"{self.vllm_base_url}/health\") as response:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 1353, in __aenter__\n    self._resp = await self._coro\n                 ^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 657, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 564, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 975, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1350, in _create_direct_connection\n    raise last_exc\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1319, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1088, in _wrap_create_connection\n    raise client_error(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]\n", "additional_data": {}}}
2025-07-08 11:24:22,017 - app.services.enhanced_ai_model - WARNING - vLLM 서버 상태 이상: {'status': 'error', 'error': "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]"}
2025-07-08 11:24:22,017 - main - INFO - {"timestamp": "2025-07-08T02:24:22.017386Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: AI 백엔드 상태 - success", "service": "main", "version": "0.4.0", "metadata": {"event": "AI 백엔드 상태", "status": "success", "uptime_seconds": 0.569782018661499, "details": {"backend_type": "vllm_only", "vllm": {"available": false, "stats": {"requests": 0, "successes": 0, "avg_response_time": 0.0}, "server_info": {}}, "last_health_check": "2025-07-08T11:24:21.821927", "health_check_interval": 60, "performance_metrics": {"summary": {"time_window_hours": 1, "overview": {"total_operations": 0, "total_violations": 0, "critical_violations": 0}, "response_time_stats": {"min": 0, "max": 0, "avg": 0, "median": 0, "p95": 0}, "token_speed_stats": {"min": 0, "max": 0, "avg": 0, "median": 0, "p95": 0}, "model_performance": {}, "threshold_compliance": {"response_time_compliance": 1.0, "token_speed_compliance": 1.0, "success_rate_compliance": 1.0, "overall_compliance": 1.0}, "recommendations": ["평균 토큰 생성 속도(0.0 tokens/sec)가 목표치(30.0 tokens/sec) 미만입니다. GPU 성능 향상이나 배치 크기 조정을 고려하세요."]}, "thresholds": {"response_time_target": 2.0, "token_speed_target": 30.0, "success_rate_target": 0.95}, "alerts": []}}}}
2025-07-08 11:24:22,017 - main - ERROR - {"timestamp": "2025-07-08T02:24:22.017515Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: HAPA 백엔드 초기화", "service": "main", "version": "0.4.0", "error_details": {"error_type": "KeyError", "error_message": "'backends'", "context": "HAPA 백엔드 초기화", "traceback": "Traceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/main.py\", line 68, in lifespan\n    \"vllm_available\": backend_status[\"backends\"][\"vllm\"][\"available\"],\n                      ~~~~~~~~~~~~~~^^^^^^^^^^^^\nKeyError: 'backends'\n", "additional_data": {}}}
2025-07-08 11:24:22,018 - uvicorn.error - INFO - Application startup complete.
2025-07-08 11:24:41,370 - code_generation_api - INFO - {"timestamp": "2025-07-08T02:24:41.370541Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: Enhanced 통계 조회 - success", "service": "code_generation_api", "version": "0.4.0", "metadata": {"event": "Enhanced 통계 조회", "status": "success", "uptime_seconds": 19.989442110061646, "details": {"requests_count": 150}}}
2025-07-08 11:24:41,370 - uvicorn.access - INFO - 127.0.0.1:52296 - "GET /api/v1/code/enhanced/stats HTTP/1.1" 200
2025-07-08 11:24:48,562 - app.services.enhanced_ai_model - INFO - Enhanced AI 모델 서비스 (vLLM 전용) 초기화 시작
2025-07-08 11:24:48,741 - vllm_integration - ERROR - {"timestamp": "2025-07-08T02:24:48.740886Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: vLLM 서버 연결", "service": "vllm_integration", "version": "0.4.0", "error_details": {"error_type": "ClientConnectorError", "error_message": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]", "context": "vLLM 서버 연결", "traceback": "Traceback (most recent call last):\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1073, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 104, in start_connection\n    raise first_exception\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 81, in start_connection\n    sock = await _connect_sock(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 166, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"uvloop/loop.pyx\", line 2633, in sock_connect\n  File \"uvloop/loop.pyx\", line 1108, in uvloop.loop.Loop._sock_connect_cb\nConnectionRefusedError: [Errno 61] Connect call failed ('3.13.240.111', 8002)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/app/services/vllm_integration_service.py\", line 61, in check_health\n    async with session.get(f\"{self.vllm_base_url}/health\") as response:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 1353, in __aenter__\n    self._resp = await self._coro\n                 ^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 657, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 564, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 975, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1350, in _create_direct_connection\n    raise last_exc\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1319, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1088, in _wrap_create_connection\n    raise client_error(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]\n", "additional_data": {}}}
2025-07-08 11:24:48,741 - app.services.enhanced_ai_model - WARNING - vLLM 서버 상태 이상: {'status': 'error', 'error': "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]"}
2025-07-08 11:24:48,741 - app.services.performance_profiler - INFO - AI 성능 메트릭이 초기화되었습니다 (vLLM 전용 메트릭 포함)
2025-07-08 11:24:48,741 - app.services.enhanced_ai_model - INFO - Enhanced AI 모델 서비스 초기화 완료
2025-07-08 11:24:48,741 - app.services.enhanced_ai_model - ERROR - vLLM 서버를 사용할 수 없습니다. 서버 상태를 확인하세요.
2025-07-08 11:24:48,838 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8001 local_address=None timeout=10.0 socket_options=None
2025-07-08 11:24:48,840 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-07-08 11:24:48,840 - app.services.user_service - ERROR - 사용자 설정 조회 중 오류: All connection attempts failed
2025-07-08 11:24:49,009 - vllm_integration - ERROR - {"timestamp": "2025-07-08T02:24:49.008984Z", "level": "ERROR", "category": "error_event", "message": "에러 발생: vLLM 서버 연결", "service": "vllm_integration", "version": "0.4.0", "error_details": {"error_type": "ClientConnectorError", "error_message": "Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]", "context": "vLLM 서버 연결", "traceback": "Traceback (most recent call last):\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1073, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 104, in start_connection\n    raise first_exception\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 81, in start_connection\n    sock = await _connect_sock(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohappyeyeballs/impl.py\", line 166, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"uvloop/loop.pyx\", line 2633, in sock_connect\n  File \"uvloop/loop.pyx\", line 1108, in uvloop.loop.Loop._sock_connect_cb\nConnectionRefusedError: [Errno 61] Connect call failed ('3.13.240.111', 8002)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/doseon/Desktop/Hancom AI/project/Backend/app/services/vllm_integration_service.py\", line 61, in check_health\n    async with session.get(f\"{self.vllm_base_url}/health\") as response:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 1353, in __aenter__\n    self._resp = await self._coro\n                 ^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/client.py\", line 657, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 564, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 975, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1350, in _create_direct_connection\n    raise last_exc\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1319, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/anaconda3/lib/python3.12/site-packages/aiohttp/connector.py\", line 1088, in _wrap_create_connection\n    raise client_error(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 3.13.240.111:8002 ssl:default [Connect call failed ('3.13.240.111', 8002)]\n", "additional_data": {}}}
2025-07-08 11:24:49,009 - code_generation_api - INFO - {"timestamp": "2025-07-08T02:24:49.009923Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: Enhanced 상태 확인 - success", "service": "code_generation_api", "version": "0.4.0", "metadata": {"event": "Enhanced 상태 확인", "status": "success", "uptime_seconds": 27.62882113456726, "details": {"overall_status": "degraded"}}}
2025-07-08 11:24:49,010 - uvicorn.access - INFO - 127.0.0.1:52298 - "GET /api/v1/code/enhanced/status HTTP/1.1" 200
2025-07-08 11:25:01,333 - enhanced_logging - ERROR - Request processing error: 'CodeGenerationRequest' object has no attribute 'headers'
2025-07-08 11:25:01,333 - HAPA.production - INFO - {"timestamp": "2025-07-08T02:25:01.333839Z", "event_type": "api_response_end", "request_id": "add49b45-91d2-4d7b-b52e-68263cfba28f", "trace_id": "a909b99a-3a87-45fe-ad55-502e23147336", "service": "HAPA", "version": "1.0.0", "environment": "development", "method": "POST", "endpoint": "/api/v1/code/generate", "status_code": 500, "duration_ms": 3.9768218994140625, "response_size_bytes": 34, "performance_metrics": {"cache_hit": false, "database_queries": null, "external_api_calls": null, "requests_per_second": 251.45707434052758}, "business_metrics": {"success": false, "performance_category": "excellent", "user_type": "authenticated", "revenue_generating": true, "ai_api_usage": true, "performance_critical": true}, "error_info": {"status_code": 500}}
2025-07-08 11:25:01,334 - uvicorn.access - INFO - 127.0.0.1:52304 - "POST /api/v1/code/generate?enhanced=true HTTP/1.1" 500
2025-07-08 11:25:13,695 - uvicorn.error - INFO - Shutting down
2025-07-08 11:25:13,796 - uvicorn.error - INFO - Waiting for application shutdown.
2025-07-08 11:25:13,796 - main - INFO - {"timestamp": "2025-07-08T02:25:13.796703Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: HAPA 백엔드 종료 - started", "service": "main", "version": "0.4.0", "metadata": {"event": "HAPA 백엔드 종료", "status": "started", "uptime_seconds": 52.34910583496094, "details": {}}}
2025-07-08 11:25:13,796 - app.services.enhanced_ai_model - INFO - Enhanced AI 모델 서비스 정리 완료
2025-07-08 11:25:13,796 - main - INFO - {"timestamp": "2025-07-08T02:25:13.796889Z", "level": "INFO", "category": "system_event", "message": "시스템 이벤트: HAPA 백엔드 종료 - completed", "service": "main", "version": "0.4.0", "metadata": {"event": "HAPA 백엔드 종료", "status": "completed", "uptime_seconds": 52.34928274154663, "details": {}}}
2025-07-08 11:25:13,796 - uvicorn.error - INFO - Application shutdown complete.
2025-07-08 11:25:13,796 - uvicorn.error - INFO - Finished server process [47575]
INFO:     Stopping reloader process [47521]
